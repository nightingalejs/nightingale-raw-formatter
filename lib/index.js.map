{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;;;;QAGgB,K,GAAA,K;kBAqBQ,M;;AAxBxB;;;;AACA;;;;;;;;;;;;EAEO,SAAS,KAAT,CAAe,MAAf,EAAuB,MAAvB,EAA+B;AAClC,WAAO,MAAP;AACH;;;;;;;EAGD,SAAS,aAAT,CAAuB,MAAvB,EAA+B,cAA/B,EAA+C;AAC3C,UAAM,OAAO,OAAO,IAAP,CAAY,MAAZ,CAAb;;AAEA,QAAI,KAAK,MAAL,KAAgB,CAApB,EAAuB;AACnB;AACH;;AAED,WAAO,CAAC,EAAD,GAAK,KAAK,GAAL,CAAS,OAAO;AACxB,eAAO,CAAC,AAAD,GAAG,GAAH,EAAO,EAAP,GAAW,MAAM,kBAAkB,eAAe,GAAf,CAAxB,EAA6C,KAAK,SAAL,CAAe,OAAO,GAAP,CAAf,CAA7C,CAAX,EAAqF,AAArF,CAAP;AACH,KAFW,EAET,IAFS,CAEJ,IAFI,CAAL,EAEO,EAFP,CAAP;AAGH;;;;;;;;;EAMc,SAAS,MAAT,CAAgB,MAAhB,EAAwB;AACnC,QAAI,SAAS,EAAb;AACA,QAAI,OAAO,GAAX,EAAgB;AACZ,kBAAU,MAAM,CAAC,MAAD,CAAN,EAAgB,OAAO,GAAvB,CAAV;AACH;;AAED,QAAI,OAAO,QAAX,EAAqB;AACjB,YAAI,OAAO,MAAP,KAAkB,CAAtB,EAAyB;AACrB,sBAAU,GAAV;AACH;;AAED,kBAAU,MAAM,CAAC,MAAD,EAAS,MAAT,CAAN,EAAwB,OAAO,QAAP,CAAgB,YAAhB,GAA+B,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAAxB,CAAV;;AAEH;;AAED,QAAI,UAAU,OAAO,MAAP,IAAiB,oCAAc,OAAO,KAArB,CAA/B;AACA,QAAI,SAAS,OAAO,MAAP,IAAiB,oCAAc,OAAO,KAArB,CAA9B;;AAEA,QAAI,OAAO,OAAX,EAAoB;AAChB,YAAI,WAAW,QAAQ,MAAR,KAAmB,CAAlC,EAAqC;AACjC,uBAAW,CAAC,CAAD,GAAI,OAAO,OAAX,EAAmB,AAAnB,CAAX;AACH,SAFD,MAEO;AACH,sBAAU,OAAO,OAAjB;AACH;AACJ;;AAED,QAAI,MAAJ,EAAY;AACR,kBAAU,MAAM,MAAN,EAAc,OAAd,CAAV;AACH;;AAED,QAAI,OAAO,MAAP,KAAkB,CAAtB,EAAyB;AACrB,kBAAU,GAAV;AACH;;AAED,cAAU,OAAV;;AAEA,QAAI,OAAO,QAAX,EAAqB;AACjB,cAAM,eAAe,cAAc,OAAO,QAArB,EAA+B,OAAO,cAAtC,CAArB;;AAEA,YAAI,YAAJ,EAAkB;AACd,gBAAI,OAAO,MAAP,KAAkB,CAAtB,EAAyB;AACrB,0BAAU,GAAV;AACH;;AAED,sBAAU,YAAV;AACH;AACJ;;AAED,QAAI,OAAO,KAAX,EAAkB;AACd,cAAM,eAAe,cAAc,OAAO,KAArB,CAArB;;AAEA,YAAI,YAAJ,EAAkB;AACd,gBAAI,OAAO,MAAP,KAAkB,CAAtB,EAAyB;AACrB,0BAAU,GAAV;AACH;;AAED,sBAAU,YAAV;AACH;AACJ;;AAED,WAAO,MAAP;AACH;;;AAGD,OAAO,KAAP,GAAe,KAAf","file":"index.js","sourcesContent":["import ansi from 'ansi-styles';\nimport { levelToSymbol, levelToStyles } from 'nightingale-formatter';\n\nexport function style(styles, string) {\n    return string;\n}\n\n// TODO create package\nfunction displayObject(object, metadataStyles) {\n    const keys = Object.keys(object);\n\n    if (keys.length === 0) {\n        return;\n    }\n\n    return `{ ${keys.map(key => {\n        return `${key}: ${style(metadataStyles && metadataStyles[key], JSON.stringify(object[key]))}`;\n    }).join(', ')} }`;\n}\n\n/**\n * @param {Object} record\n * @returns {string}\n */\nexport default function format(record) {\n    let string = '';\n    if (record.key) {\n        string += style(['gray'], record.key);\n    }\n\n    if (record.datetime) {\n        if (string.length !== 0) {\n            string += ' ';\n        }\n\n        string += style(['gray', 'bold'], record.datetime.toTimeString().split(' ')[0]);\n        /* new Date().toFormat('HH24:MI:SS') */\n    }\n\n    let message = record.symbol || levelToSymbol[record.level];\n    let styles = record.styles || levelToStyles[record.level];\n\n    if (record.message) {\n        if (message && message.length !== 0) {\n            message += ` ${record.message}`;\n        } else {\n            message = record.message;\n        }\n    }\n\n    if (styles) {\n        message = style(styles, message);\n    }\n\n    if (string.length !== 0) {\n        string += ' ';\n    }\n\n    string += message;\n\n    if (record.metadata) {\n        const stringObject = displayObject(record.metadata, record.metadataStyles);\n\n        if (stringObject) {\n            if (string.length !== 0) {\n                string += ' ';\n            }\n\n            string += stringObject;\n        }\n    }\n\n    if (record.extra) {\n        const stringObject = displayObject(record.extra);\n\n        if (stringObject) {\n            if (string.length !== 0) {\n                string += ' ';\n            }\n\n            string += stringObject;\n        }\n    }\n\n    return string;\n}\n\n// export style function\nformat.style = style;\n"]}